import{_ as h,r as m,R as g,u as _,o as y,a as n,b as v,c as b,d as s,Q as C,e as i,q as w,w as I,p as S,F as V,f as E,i as T}from"./index-89966047.js";const k={name:"Login",setup(){const c=m(null),a=g(),f=_(),e=T(),d=m(!1),t=m(!1),r=m({email:"",password:""});return y(()=>{document.querySelector('input[type="text"]').focus();let o=document.querySelector('input[type="password"]');o.classList.add("w-100"),o.setAttribute("autocomplete","current-password");const u=localStorage.getItem("username");u&&(r.value.email=u,c.value=!0,o.focus())}),{rememberMe:c,onSubmit:()=>{d.value=!0,t.value=!1,c.value?localStorage.setItem("username",r.value.email):localStorage.removeItem("username"),setTimeout(()=>{a.login(r.value).then(o=>{d.value=!1,console.log(o),o.status===200?(setTimeout(()=>{e.showWarningAlert("Sesión expirada","Tu sesión ha expirado. Inicia sesión de nuevo.").then(()=>{a.logout(),f.push("/")})},4*60*60*1e3),f.push({path:"/inicio"}),e.closeLoading()):o.response.status===403?(t.value=!0,e.showWarningAlert("Plataforma no disponible","La plataforma no está disponible en este momento. Intenta de nuevo más tarde.")):o.response.status===400?(t.value=!0,e.showErrorAlert("Cuenta inválida","No has confirmado tu correo electrónico o tu cuenta ha sido bloqueada.")):o.response.status===401?(t.value=!0,e.showErrorToast("Credenciales incorrectas.")):o.response.status===423?(t.value=!0,e.showErrorAlert("Demasiados intentos",o.response.data)):(t.value=!0,e.showErrorAlert("Ocurrió un error inesperado. Intenta de nuevo más tarde."))}).catch(o=>{console.log(o),o.status===403?(t.value=!0,e.showWarningAlert("La plataforma no está disponible en este momento.")):o.status===400?(t.value=!0,e.showErrorToast("No has confirmado tu correo electrónico o tu cuenta ha sido bloqueada.")):o.status===401?(t.value=!0,e.showErrorToast("Credenciales incorrectas.")):o.status===423?(t.value=!0,e.showErrorAlert("Cuenta bloqueada",o.response.data)):(t.value=!0,e.showErrorAlert("Ocurrió un error inesperado."))})},1e3)},data:r,loading:d,wrongCredentials:t}}},A={class:"container-fluid surface-0"},q={class:"surface-card w-full md:w-8 lg:w-6 mx-auto v-center",style:{"max-width":"500px","padding-top":"3rem","padding-bottom":"8rem"}},L=s("div",{class:"text-center mb-2"},[s("div",{class:"text-900 text-4xl pb-5 font-medium"},"Ingresa tus datos")],-1),N=s("label",{for:"email1",class:"block text-900 fs-5 font-medium mb-2"},"Correo electrónico",-1),O=s("label",{for:"password1",class:"block text-900 fs-5 font-medium mb-2"},"Contraseña",-1),j={class:"flex align-items-center justify-content-between mb-6"},B={class:"flex align-items-center"},M=s("label",{for:"rememberme1"},"Recordarme",-1),R=s("a",{class:"font-medium no-underline ml-2 text-primary-700 hover:text-primary-600 text-right cursor-pointer"},"Olvidé mi contraseña",-1),P={key:0,class:"text-center block font-medium text-red-600 mb-1"},U=E('<footer><div class="row mx-0 justify-content-center mb-0 pt-5 pb-0 row-2 px-3"><div class="col-12"><div class="row row-2"><div class="col-sm-4 my-sm-0"><ul class="list-unstyled"><li class="mt-0 fw-bold">Dirección</li><li>Avenida Ing. Víctor Bravo Ahuja No. 125 Esquina Calzada Tecnológico, C.P. 68030</li><li class="mt-3 fw-bold">Contacto</li><li>Email: <a href="mailto:jefatura.humanos@oaxaca.tecnm.mx" style="color:#fff;">jefatura.humanos@oaxaca.tecnm.mx</a></li><li>Tel: (951) 501 50 16 Ext. 1055</li></ul></div><div class="col-sm-4 my-sm-0"><ul class="list-unstyled"><li class="mt-0 fw-bold">Enlaces</li><li class="mt-1"><a href="www.oaxaca.tecnm.mx" style="color:#fff;text-decoration:none;">Instituto Tecnológico de Oaxaca</a></li><li class="mt-1"><a href="https://it.sgwebcualli.com/Oaxaca/" style="color:#fff;text-decoration:none;">Sistema de Gestión de la Calidad</a></li><li class="mt-1"><a href="http://www.oaxaca.tecnm.mx/directorio" style="color:#fff;text-decoration:none;">Directorio</a></li></ul></div><div class="col-sm-3 text-md-center"><h5><span><i class="fa fa-firefox text-light" aria-hidden="true"></i></span><b> Instituto tecnológico de Oaxaca</b></h5></div></div></div></div><div class="row mx-0 justify-content-center mt-0 pt-0 row-1 mb-0 px-sm-3 px-2"><div class="col-12"><div class="row mx-0 my-1 row-1 no-gutters"><div class="text-center">Recursos Humanos © 2023 Instituto Tecnológico de Oaxaca. Todos los derechos reservados. </div><div class="col-md-3 col-auto"></div><div class="col-md-3 col-auto"></div></div></div></div></footer>',1);function D(c,a,f,e,d,t){const r=n("InputText"),p=n("Password"),o=n("Checkbox"),u=n("RouterLink"),x=n("Button");return v(),b(V,null,[s("div",A,[s("div",q,[L,s("div",null,[s("form",{id:"login",onSubmit:a[3]||(a[3]=C((...l)=>e.onSubmit&&e.onSubmit(...l),["prevent"])),class:"px-5"},[N,i(r,{id:"email1",modelValue:e.data.email,"onUpdate:modelValue":a[0]||(a[0]=l=>e.data.email=l),type:"text",class:w(["w-full mb-3",{"border-red-600 border-2 border-round-lg":e.wrongCredentials}]),autocomplete:"email",required:""},null,8,["modelValue","class"]),O,i(p,{id:"password1",modelValue:e.data.password,"onUpdate:modelValue":a[1]||(a[1]=l=>e.data.password=l),class:w(["w-full mb-3",{"border-red-600 border-2 border-round-lg":e.wrongCredentials}]),autocomplete:"current-password",required:"",feedback:!1,toggleMask:""},null,8,["modelValue","class"]),s("div",j,[s("div",B,[i(o,{id:"rememberme1",binary:!0,modelValue:e.rememberMe,"onUpdate:modelValue":a[2]||(a[2]=l=>e.rememberMe=l),class:"mr-2"},null,8,["modelValue"]),M]),i(u,{to:"/restablecer-contrasena",class:"no-underline"},{default:I(()=>[R]),_:1})]),e.wrongCredentials?(v(),b("span",P,"Credenciales incorrectas")):S("",!0),i(x,{type:"submit",label:e.loading?null:"Iniciar sesión",icon:"pi pi-user",class:"w-full hover:shadow-3 bg-primary-700 hover:bg-primary-600",loading:e.loading},null,8,["label","loading"])],32)])])]),U],64)}const z=h(k,[["render",D]]);export{z as default};
