import{N as f,O as o,_ as v,g as w,a as b,b as _,c as y,d as s,Q as E,e as c,q as h,t as m,r as u,o as R,i as C}from"./index-e51a670a.js";const L=f("config",{state:()=>({apiURL:"https://sgip-api-0fe230af7558.herokuapp.com/api/v1/configuration",message:"",error:"",data:[]}),actions:{async getConfig(){this.error="";try{const e=await o.get(`${this.apiURL}`);return this.data=e.data,this.message=e.data,e}catch(e){this.error=e.response.message||e.message}},async getRegistrationStatus(){this.error="";try{const e=await o.get(`${this.apiURL}/check/registration`);return this.data=e.data,this.message=e.message,e}catch(e){this.error=e.response.message||e.message}},async getLoginStatus(){this.error="";try{const e=await o.get(`${this.apiURL}/check/login`);return this.data=e.data,this.message=e.message,e}catch(e){this.error=e.response.message||e.message}},async getDomainFilterStatus(){this.error="";try{const e=await o.get(`${this.apiURL}/check/domain-filter`);return this.data=e.data,this.message=e.message,e}catch(e){this.error=e.response.message||e.message}},async enableRegistration(){this.error="";try{const e=await o.post(`${this.apiURL}/enable/registration`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}},async disableRegistration(){this.error="";try{const e=await o.post(`${this.apiURL}/disable/registration`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}},async enableLogin(){this.error="";try{const e=await o.post(`${this.apiURL}/enable/login`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}},async disableLogin(){this.error="";try{const e=await o.post(`${this.apiURL}/disable/login`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}},async enableDomainFilter(){this.error="";try{const e=await o.post(`${this.apiURL}/enable/domain-filter`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}},async disableDomainFilter(){this.error="";try{const e=await o.post(`${this.apiURL}/disable/domain-filter`);return this.data=e.data.data,this.message=e.data.message,e}catch(e){return this.error=e.response.data.message||e.message,e}}}}),F=w({name:"opciones",setup(){const e=C(),t=L(),g=u({contrasenaActual:"",contrasenaNueva:"",confirmarNueva:""}),i=u(!1),r=u(!1),n=u(!1);return R(()=>{t.getConfig().then(a=>{a.status==200?(console.log("res ",a),console.log("registrationEnabled ",a.data.registrationEnabled),i.value=a.data.registrationEnabled,r.value=a.data.loginEnabled,n.value=a.data.domainFilterEnabled):e.showErrorAlert("Error","No se pudo obtener la configuración actual.")})}),{data:g,loginEnabled:r,domainFilterEnabled:n,registrationEnabled:i,switchLogin:()=>{r.value==!0?t.enableLogin().then(a=>{a.status==200?(e.showSuccessToast("Inicio de sesión habilitado."),r.value=!0):(e.showErrorAlert("No se pudo habilitar el inicio de sesión."),r.value=!1)}):t.disableLogin().then(a=>{a.status==200?(e.showSuccessToast("Inicio de sesión deshabilitado."),r.value=!1):(e.showErrorAlert("No se pudo deshabilitar el inicio de sesión."),r.value=!0)})},switchDomainFilter:()=>{n.value==!0?t.enableDomainFilter().then(a=>{a.status==200?(e.showSuccessToast("Filtro de dominio habilitado."),n.value=!0):(e.showErrorAlert("No se pudo habilitar el filtro de dominio."),n.value=!1)}):t.disableDomainFilter().then(a=>{a.status==200?(e.showSuccessToast("Filtro de dominio deshabilitado."),n.value=!1):(e.showErrorAlert("No se pudo deshabilitar el filtro de dominio."),n.value=!0)})},switchRegistration:()=>{i.value==!0?t.enableRegistration().then(a=>{a.status==200?(e.showSuccessToast("Registro de usuarios habilitado."),i.value=!0):(e.showErrorAlert("No se pudo habilitar el registro de usuarios."),i.value=!1)}):t.disableRegistration().then(a=>{a.status==200?(e.showSuccessToast("Registro de usuarios deshabilitado."),i.value=!1):(e.showErrorAlert("No se pudo deshabilitar el registro de usuarios."),i.value=!0)})}}}}),x={class:"container-lg pt-4 my-3"},k={class:"card shadow-5 border-round-2xl overflow-hidden mx-auto"},S=s("div",{class:"d-flex card-header py-0 pe-0"},[s("span",{class:"flex text-center"},[s("i",{class:"bi bi-tools fw-bold h1 my-0"}),s("span",{class:"fw-bold h4 align-self-center ms-3 my-0"}," Configuración ")])],-1),U={class:"card-body table-responsive"},$={class:"grid mb-2"},D={class:"col-12 flex"},N=s("small",{class:"block text-muted"},"Los cambios realizados aquí surten efecto inmediatamente.",-1),V={class:"my-3"},A=s("span",{class:"fw-medium text-xl"},"Registro de usuarios",-1),T=s("small",{class:"block text-muted"},"Cuando está habilitado, los empleados con un correo institucional válido y existente en la base de datos, pueden registrarse.",-1),B=s("small",{class:"block text-muted"},"Cuando está deshabilitado, solo el administrador puede registrar usuarios.",-1),I={class:"flex pt-1"},q={class:"my-3"},H=s("span",{class:"fw-medium text-xl"},"Inicio de sesión",-1),z=s("small",{class:"block text-muted"},"Cuando está habilitado, todos los usuarios registrados y válidos (habilitados y no bloqueados) pueden ingresar a la plataforma.",-1),M=s("small",{class:"block text-muted"},"Cuando está deshabilitado, solo los usuarios con el rol Administrador pueden ingresar a la plataforma.",-1),O={class:"flex pt-1"},j={class:"my-3"},G=s("span",{class:"fw-medium text-xl"},"Filtrar dominio de correo",-1),P=s("small",{class:"block text-muted"},"Cuando está habilitado, el administrador solo puede registrar usuarios con correos electrónicos institucionales.",-1),Q=s("small",{class:"block text-muted"},"Cuando está deshabilitado, el administrador puede registrar usuarios con correos de cualquier dominio (ej. Gmail, Outlook, etc.).",-1),J={class:"flex pt-1"},K=s("br",null,null,-1),W=s("div",{class:"col-12 lg:col-6"},null,-1);function X(e,t,g,i,r,n){const d=b("InputSwitch"),p=b("Button");return _(),y("div",x,[s("div",k,[S,s("div",U,[s("div",$,[s("div",D,[s("form",{onSubmit:t[3]||(t[3]=E((...l)=>e.cambiarContrasena&&e.cambiarContrasena(...l),["prevent"]))},[N,s("div",V,[A,T,B,s("div",I,[c(d,{modelValue:e.registrationEnabled,"onUpdate:modelValue":t[0]||(t[0]=l=>e.registrationEnabled=l),onChange:e.switchRegistration},null,8,["modelValue","onChange"]),s("span",{class:h(["v-100 ps-3",e.registrationEnabled==!0?"text-blue-700":"text-muted"])},m(e.registrationEnabled==!0?"Habilitado":"Deshabilitado"),3)])]),s("div",q,[H,z,M,s("div",O,[c(d,{modelValue:e.loginEnabled,"onUpdate:modelValue":t[1]||(t[1]=l=>e.loginEnabled=l),onChange:e.switchLogin},null,8,["modelValue","onChange"]),s("span",{class:h(["v-100 ps-3",e.loginEnabled==!0?"text-blue-700":"text-muted"])},m(e.loginEnabled==!0?"Habilitado":"Deshabilitado"),3)])]),s("div",j,[G,P,Q,s("div",J,[c(d,{modelValue:e.domainFilterEnabled,"onUpdate:modelValue":t[2]||(t[2]=l=>e.domainFilterEnabled=l),onChange:e.switchDomainFilter},null,8,["modelValue","onChange"]),s("span",{class:h(["v-100 ps-3",e.domainFilterEnabled==!0?"text-blue-700":"text-muted"])},m(e.domainFilterEnabled==!0?"Habilitado":"Deshabilitado"),3)])]),K,c(p,{type:"submit",id:"subPass",label:"Cambiar contraseña",icon:"pi pi-check",class:"float-end p-disabled",raised:""})],32)]),W])])])])}const Z=v(F,[["render",X]]);export{Z as default};
