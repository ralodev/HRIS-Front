import{_ as b,g,a as p,b as f,c as v,d as s,Q as w,e as u,q as c,t as m,r,o as _,i as E}from"./index-66b45988.js";import{u as C}from"./configStore-24ed981d.js";const x=g({name:"opciones",setup(){const e=E(),a=C(),h=r({contrasenaActual:"",contrasenaNueva:"",confirmarNueva:""}),t=r(!1),i=r(!1),l=r(!1);return _(()=>{a.getConfig().then(o=>{o.status==200?(console.log("res ",o),console.log("registrationEnabled ",o.data.registrationEnabled),t.value=o.data.registrationEnabled,i.value=o.data.loginEnabled,l.value=o.data.domainFilterEnabled):e.showErrorAlert("Error","No se pudo obtener la configuración actual.")})}),{data:h,loginEnabled:i,domainFilterEnabled:l,registrationEnabled:t,switchLogin:()=>{i.value==!0?a.enableLogin().then(o=>{o.status==200?(e.showSuccessToast("Inicio de sesión habilitado."),i.value=!0):(e.showErrorAlert("No se pudo habilitar el inicio de sesión."),i.value=!1)}):a.disableLogin().then(o=>{o.status==200?(e.showSuccessToast("Inicio de sesión deshabilitado."),i.value=!1):(e.showErrorAlert("No se pudo deshabilitar el inicio de sesión."),i.value=!0)})},switchDomainFilter:()=>{l.value==!0?a.enableDomainFilter().then(o=>{o.status==200?(e.showSuccessToast("Filtro de dominio habilitado."),l.value=!0):(e.showErrorAlert("No se pudo habilitar el filtro de dominio."),l.value=!1)}):a.disableDomainFilter().then(o=>{o.status==200?(e.showSuccessToast("Filtro de dominio deshabilitado."),l.value=!1):(e.showErrorAlert("No se pudo deshabilitar el filtro de dominio."),l.value=!0)})},switchRegistration:()=>{t.value==!0?a.enableRegistration().then(o=>{o.status==200?(e.showSuccessToast("Registro de usuarios habilitado."),t.value=!0):(e.showErrorAlert("No se pudo habilitar el registro de usuarios."),t.value=!1)}):a.disableRegistration().then(o=>{o.status==200?(e.showSuccessToast("Registro de usuarios deshabilitado."),t.value=!1):(e.showErrorAlert("No se pudo deshabilitar el registro de usuarios."),t.value=!0)})}}}}),F={class:"container-lg pt-4 my-3"},y={class:"card shadow-5 border-round-2xl overflow-hidden mx-auto"},N=s("div",{class:"d-flex card-header py-0 pe-0"},[s("span",{class:"flex text-center"},[s("i",{class:"bi bi-tools fw-bold h1 my-0"}),s("span",{class:"fw-bold h4 align-self-center ms-3 my-0"}," Configuración ")])],-1),S={class:"card-body table-responsive"},V={class:"grid mb-2"},k={class:"col-12 flex"},A=s("small",{class:"block text-muted"},"Los cambios realizados aquí surten efecto inmediatamente.",-1),D={class:"my-3"},R=s("span",{class:"fw-medium text-xl"},"Registro de usuarios",-1),L=s("small",{class:"block text-muted"},"Cuando está habilitado, los empleados con un correo institucional válido y existente en la base de datos, pueden registrarse.",-1),T=s("small",{class:"block text-muted"},"Cuando está deshabilitado, solo el administrador puede registrar usuarios.",-1),I={class:"flex pt-1"},q={class:"my-3"},$=s("span",{class:"fw-medium text-xl"},"Inicio de sesión",-1),B=s("small",{class:"block text-muted"},"Cuando está habilitado, todos los usuarios registrados y válidos (habilitados y no bloqueados) pueden ingresar a la plataforma.",-1),H=s("small",{class:"block text-muted"},"Cuando está deshabilitado, solo los usuarios con el rol Administrador pueden ingresar a la plataforma.",-1),U={class:"flex pt-1"},z={class:"my-3"},M=s("span",{class:"fw-medium text-xl"},"Filtrar dominio de correo",-1),j=s("small",{class:"block text-muted"},"Cuando está habilitado, el administrador solo puede registrar usuarios con correos electrónicos institucionales.",-1),G=s("small",{class:"block text-muted"},"Cuando está deshabilitado, el administrador puede registrar usuarios con correos de cualquier dominio (ej. Gmail, Outlook, etc.).",-1),O={class:"flex pt-1"},Q=s("div",{class:"col-12 lg:col-6"},null,-1);function J(e,a,h,t,i,l){const d=p("InputSwitch");return f(),v("div",F,[s("div",y,[N,s("div",S,[s("div",V,[s("div",k,[s("form",{onSubmit:a[3]||(a[3]=w((...n)=>e.cambiarContrasena&&e.cambiarContrasena(...n),["prevent"]))},[A,s("div",D,[R,L,T,s("div",I,[u(d,{modelValue:e.registrationEnabled,"onUpdate:modelValue":a[0]||(a[0]=n=>e.registrationEnabled=n),onChange:e.switchRegistration},null,8,["modelValue","onChange"]),s("span",{class:c(["v-100 ps-3",e.registrationEnabled==!0?"text-blue-700":"text-muted"])},m(e.registrationEnabled==!0?"Habilitado":"Deshabilitado"),3)])]),s("div",q,[$,B,H,s("div",U,[u(d,{modelValue:e.loginEnabled,"onUpdate:modelValue":a[1]||(a[1]=n=>e.loginEnabled=n),onChange:e.switchLogin},null,8,["modelValue","onChange"]),s("span",{class:c(["v-100 ps-3",e.loginEnabled==!0?"text-blue-700":"text-muted"])},m(e.loginEnabled==!0?"Habilitado":"Deshabilitado"),3)])]),s("div",z,[M,j,G,s("div",O,[u(d,{modelValue:e.domainFilterEnabled,"onUpdate:modelValue":a[2]||(a[2]=n=>e.domainFilterEnabled=n),onChange:e.switchDomainFilter},null,8,["modelValue","onChange"]),s("span",{class:c(["v-100 ps-3",e.domainFilterEnabled==!0?"text-blue-700":"text-muted"])},m(e.domainFilterEnabled==!0?"Habilitado":"Deshabilitado"),3)])])],32)]),Q])])])])}const X=b(x,[["render",J]]);export{X as default};
