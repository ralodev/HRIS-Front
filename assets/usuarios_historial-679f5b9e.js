import{_ as g,P as f,D as l,g as y,a as b,b as T,c as x,d as t,e as c,h as E,r as _,O as k,u as B,o as C,s as A,n as L,i as V}from"./index-dd291314.js";import{u as D}from"./adminStore-d95c7763.js";f.use(l,l,l,l);const K=y({name:"TablaEmpleados",components:{DataTable:f},setup(){const e=_("");k.get("email");let a;const d=_(),u=D(),s=V(),p=B(),r=_([]),i={responsive:!0,autoWidth:!0,dom:"trip",paging:!0,pagingType:"numbers",language:A,pageLength:10,order:[[0,"asc"]],initComplete:function(){this.on("draw.dt",function(){L(()=>{v(),a.responsive.recalc()})})}},m=[{data:"id",title:"#",class:"all",width:"20%"},{data:"tipo",title:"Tipo",width:"10%",class:"min-tablet-l"},{data:"descripcion",title:"Descripción",class:"min-desktop no-wrap text-nowrap email-col",width:"10%"},{data:"fecha",title:"Fecha",class:"all no-wrap text-nowrap email-col",width:"10%"},{data:null,title:"Usuario",class:"min-tablet-l no-wrap text-nowrap email-col",width:"10%",render:function(o){return o.usuario.email}},{data:null,class:"text-nowrap  acciones justify-content-center all ",width:"10%",title:"Acciones",orderable:!1,wrap:!0,render:function(o){return"<a title='Ver usuario' name='"+o.usuario.id+"' class='details-btn me-1 px-3 p-button-sm p-button p-component p-button-icon-only p-button-primary p-button-raised text-decoration-none'><i class='pi pi-eye'></i></a> "}}],h=async()=>{var o=!1;s.showLoading("Cargando datos"),setTimeout(()=>{o||(s.closeLoading(),s.showErrorAlert("Error","Ocurrió un error inesperado"))},5e3),await u.getHistorial().then(()=>{r.value=u.data,console.log(r.value),s.closeLoading(),o=!0}).catch(n=>{n.code==="ERR_NETWORK"?s.showErrorAlert("Error","No se pudo conectar con el servidor"):s.showErrorAlert("Error","Ocurrió un error inesperado"),o=!0})},v=()=>{document.querySelectorAll(".details-btn").forEach(n=>{n.parentElement.classList.add("flex"),n.addEventListener("click",()=>{p.push({name:"usuarios_editar",params:{id:n.attributes.name.value}})})})},w=()=>{a.search(e.value).draw()};return C(()=>{h(),a=d.value.dt}),{columns:m,data:r,options:i,usuarios:()=>{p.push({name:"usuarios"})},search:w,searchText:e,table:d}}}),N={class:"container-lg pt-4 my-3"},O={class:"card shadow-5 border-round-2xl overflow-hidden"},R=t("div",{class:"d-flex card-header py-0 pe-0"},[t("span",{class:"flex text-center"},[t("i",{class:"bi bi-clock-history fw-bold h1 my-0"}),t("span",{class:"fw-bold h4 align-self-center ms-3 my-0"}," Historial de cambios de usuarios ")])],-1),$={class:"card-body table-responsive"},I={class:"grid mb-2"},H={class:"col-12 lg:col-6 md:col-8"},S={class:"p-inputgroup"},U={class:"col-12 lg:col-6 md:col-4"};function W(e,a,d,u,s,p){const r=b("InputText"),i=b("Button"),m=b("DataTable");return T(),x("div",N,[t("div",O,[R,t("div",$,[t("div",I,[t("div",H,[t("div",S,[c(r,{placeholder:"Buscar cambio por usuario",id:"searchInput",onKeyup:E(e.search,["enter"]),modelValue:e.searchText,"onUpdate:modelValue":a[0]||(a[0]=h=>e.searchText=h),type:"search",autocomplete:"none"},null,8,["onKeyup","modelValue"]),c(i,{icon:"pi pi-search",severity:"primary",onClick:e.search},null,8,["onClick"])])]),t("div",U,[c(i,{type:"button",label:"Volver a usuarios",icon:"pi pi-undo",onClick:e.usuarios,class:"float-end me-2",severity:"secondary",raised:""},null,8,["onClick"])])]),c(m,{columns:e.columns,data:e.data,class:"table-responsive text-nowrap hover row-border border order-column",width:"100%",options:e.options,ref:"table"},null,8,["columns","data","options"])])])])}const F=g(K,[["render",W]]);export{F as default};
