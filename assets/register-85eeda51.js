import{_ as b,u as h,r as i,o as _,a as x,b as m,c as f,d as a,Q as y,e as v,h as w,p,q as E,F as C,f as S,i as T}from"./index-e51a670a.js";import{u as k}from"./usuarioStore-5e306862.js";const j={name:"Login",setup(){const u=k();h();const o=T(),r=i(!1),e=i(!1),n=i(!1),t=i(null),s=i({email:"",nombre:"",apellidos:"",rol:"EMPLEADO"});return _(()=>{document.querySelector("input").focus()}),{onSubmit:()=>{if(r.value=!0,e.value=!1,!new RegExp("^[a-zA-Z0-9._%+-]+@(itoaxaca.edu.mx|oaxaca.tecnm.mx)$").test(s.value.email)){o.showErrorAlert("Correo no válido"),r.value=!1;return}o.showLoading(),u.registrar(s.value.email).then(l=>{o.closeLoading(),r.value=!1,l.status===200?(o.showSuccessAlert("Registro exitoso","Se ha enviado un correo de confirmación a tu correo electrónico"),t.value=null):(e.value=!0,o.showErrorAlert("Error",l.response.data))}).catch(l=>{o.closeLoading(),o.showErrorAlert(l)})},data:s,loading:r,wrongCredentials:e,see:n,verifyEmail:()=>{if(!new RegExp("^[a-zA-Z0-9._%+-]+@(itoaxaca.edu.mx|oaxaca.tecnm.mx|gmail.com)$").test(s.value.email)){o.showErrorToast("Correo no válido"),r.value=!1;return}u.consultarCorreo(s.value.email).then(l=>{l.status===200?(t.value=!0,o.showSuccessToast("Correo encontrado")):(t.value=!1,o.showErrorToast("Correo no encontrado"))}).catch(l=>{t.value=null,o.showErrorToast("Ocurrió un error al verificar el correo")})},found:t,found_to_null(){t.value=null},seeTrue(){n.value=!0},seeFalse(){n.value=!1}}}},A={class:"container-fluid surface-0"},I={class:"surface-card w-full md:w-8 lg:w-6 mx-auto v-center",style:{"max-width":"500px","padding-top":"3rem","padding-bottom":"8rem"}},V=a("div",{class:"text-center mb-2"},[a("div",{class:"text-900 text-4xl pb-5 font-medium"},"Regístrate")],-1),R=a("label",{for:"email",class:"block text-900 text-lg font-medium mb-2"},"Correo electrónico institucional",-1),M={class:"p-inputgroup"},q=a("span",{class:"block text-justify text-color mb-3"},"Introduce tu correo institucional y verifica que se encuentre en la base de datos.",-1),z={key:0,class:"block text-justify text-danger mb-3"},B={key:1,class:"block text-justify text-success mb-3"},N=S('<footer><div class="row mx-0 justify-content-center mb-0 pt-5 pb-0 row-2 px-3"><div class="col-12"><div class="row row-2"><div class="col-sm-4 my-sm-0"><ul class="list-unstyled"><li class="mt-0 fw-bold">Dirección</li><li>Avenida Ing. Víctor Bravo Ahuja No. 125 Esquina Calzada Tecnológico, C.P. 68030</li><li class="mt-3 fw-bold">Contacto</li><li>Email: <a href="mailto:jefatura.humanos@oaxaca.tecnm.mx" style="color:#fff;">jefatura.humanos@oaxaca.tecnm.mx</a></li><li>Tel: (951) 501 50 16 Ext. 1055</li></ul></div><div class="col-sm-4 my-sm-0"><ul class="list-unstyled"><li class="mt-0 fw-bold">Enlaces</li><li class="mt-1"><a href="www.oaxaca.tecnm.mx" style="color:#fff;text-decoration:none;">Instituto Tecnológico de Oaxaca</a></li><li class="mt-1"><a href="https://it.sgwebcualli.com/Oaxaca/" style="color:#fff;text-decoration:none;">Sistema de Gestión de la Calidad</a></li><li class="mt-1"><a href="http://www.oaxaca.tecnm.mx/directorio" style="color:#fff;text-decoration:none;">Directorio</a></li></ul></div><div class="col-sm-3 text-md-center"><h5><span><i class="fa fa-firefox text-light" aria-hidden="true"></i></span><b> Instituto tecnológico de Oaxaca</b></h5></div></div></div></div><div class="row mx-0 justify-content-center mt-0 pt-0 row-1 mb-0 px-sm-3 px-2"><div class="col-12"><div class="row mx-0 my-1 row-1 no-gutters"><div class="text-center">Recursos Humanos © 2023 Instituto Tecnológico de Oaxaca. Todos los derechos reservados. </div><div class="col-md-3 col-auto"></div><div class="col-md-3 col-auto"></div></div></div></div></footer>',1);function O(u,o,r,e,n,t){const s=x("InputText"),d=x("Button");return m(),f(C,null,[a("div",A,[a("div",I,[V,a("div",null,[a("form",{id:"login",onSubmit:o[1]||(o[1]=y((...c)=>e.onSubmit&&e.onSubmit(...c),["prevent"])),class:"px-5"},[R,a("div",M,[v(s,{placeholder:"Introduce tu correo electrónico",id:"searchInput",onKeyup:w(e.verifyEmail,["enter"]),modelValue:e.data.email,"onUpdate:modelValue":o[0]||(o[0]=c=>e.data.email=c),autocomplete:"email",required:"",onKeypress:e.found_to_null},null,8,["onKeyup","modelValue","onKeypress"]),v(d,{class:"transition-all transition-duration-500",icon:"pi pi-search",label:e.see?"Verificar":null,severity:"primary",onClick:e.verifyEmail,onMouseover:e.seeTrue,onMouseout:e.seeFalse},null,8,["label","onClick","onMouseover","onMouseout"])]),q,e.found==!1?(m(),f("span",z,"No hubo coincidencias. Si ese es tu correo institucional y eres trabajador del instituto, debes acudir al departamento de Recursos Humanos para actualizar el que se tiene en tu registro.")):p("",!0),e.found==!0?(m(),f("span",B,"Haz click en el botón de abajo para registrarte y en unos minutos recibirás un correo electrónico con instrucciones.")):p("",!0),v(d,{type:"submit",label:e.loading?null:"Registrarme",icon:e.found?"pi pi-check":"pi pi-times",class:E([e.found?"bg-primary-700":"bg-gray-700 border-gray-700","w-full hover:shadow-3 hover:bg-primary-600"]),loading:e.loading,disabled:!e.found},null,8,["label","icon","class","loading","disabled"])],32)])])]),N],64)}const F=b(j,[["render",O]]);export{F as default};
